# -*- coding: utf-8 -*-
"""
Created on Mon Jul 27 08:17:29 2020

@author: David
"""
from smac.facade.roar_facade import ROAR
from smac.scenario.scenario import Scenario


def get_roar_object_callback(
    scenario_dict,
    seed,
    ta,
    ta_kwargs,
    backend,
    metalearning_configurations,
):
    """Random online adaptive racing."""
    scenario_dict['input_psmac_dirs'] = backend.get_smac_output_glob()
    scenario = Scenario(scenario_dict)
    return ROAR(
        scenario=scenario,
        rng=seed,
        tae_runner=ta,
        tae_runner_kwargs=ta_kwargs,
        run_id=seed,
    )


def get_random_search_object_callback(
        scenario_dict,
        seed,
        ta,
        ta_kwargs,
        backend,
        metalearning_configurations,
):
    """Random search."""
    scenario_dict['input_psmac_dirs'] = backend.get_smac_output_glob()
    scenario_dict['minR'] = len(scenario_dict['instances'])
    scenario_dict['initial_incumbent'] = 'RANDOM'
    scenario = Scenario(scenario_dict)
    return ROAR(
        scenario=scenario,
        rng=seed,
        tae_runner=ta,
        tae_runner_kwargs=ta_kwargs,
        run_id=seed,
    )


DICT_HPO_ALG = {"SMAC": None, "ROAR": get_roar_object_callback,
                "RandomSearch": get_random_search_object_callback}
